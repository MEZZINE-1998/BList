node {

   
   stage('Push image to Docker Hub'){
      // docker.withRegistry('https://registry.hub.docker.com', '59465104-1eb9-4aa6-b434-045ca8244670') {            
      //   app.push("${env.BUILD_NUMBER}")            
      //   app.push("latest")        
      //}
      docker.withRegistry( 'credentials', 'Dockerhub' ){
         sh "docker login -u credentials['username'] -p credentials['password']"
      }
      sh 'docker push mezzine/blist'
   }
   
   stage("Deploy the App on minikube-K8S"){
        sh 'kubectl apply -f k8sfile.yaml'
   }
}
